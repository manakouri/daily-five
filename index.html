<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Five</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F9F9F7;
        }
        /* Custom style to ensure SVGs scale correctly within their containers */
        .question-box svg {
            width: 100%;
            height: auto;
            max-height: 200px; /* Prevents SVGs from becoming too large */
        }
    </style>
</head>
<body class="antialiased text-gray-800">

    <div id="app-container" class="min-h-screen flex flex-col items-center justify-center p-4 sm:p-6 lg:p-8">
        
        <!-- Main content area -->
        <main id="main-content" class="w-full max-w-7xl mx-auto">
            <header class="text-center mb-6">
                <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 tracking-tight">Daily Five</h1>
                <p class="mt-2 text-base text-gray-600">A new set of daily math questions.</p>
            </header>

            <!-- Questions Grid -->
            <div id="questions-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 sm:gap-6">
                <!-- Question boxes will be inserted here by JavaScript -->
            </div>
            
            <!-- Action Buttons -->
            <div class="mt-8 flex flex-col sm:flex-row items-center justify-center gap-4">
                <button id="generate-btn" class="w-full sm:w-auto bg-blue-600 text-white font-semibold py-3 px-8 rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-transform transform hover:scale-105">
                    Generate New Set
                </button>
                <button id="answers-btn" class="w-full sm:w-auto bg-gray-200 text-gray-800 font-semibold py-3 px-8 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition-transform transform hover:scale-105">
                    Show Answers
                </button>
            </div>

            <!-- Answers Section (Initially Hidden) -->
            <div id="answers-container" class="hidden mt-8 max-w-3xl mx-auto bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-center mb-4">Answers</h2>
                <ol id="answers-list" class="list-decimal list-inside space-y-2 text-lg">
                    <!-- Answers will be inserted here -->
                </ol>
            </div>

        </main>
    </div>

    <script>
        // --- DOM Elements ---
        const questionsGrid = document.getElementById('questions-grid');
        const generateBtn = document.getElementById('generate-btn');
        const answersBtn = document.getElementById('answers-btn');
        const answersContainer = document.getElementById('answers-container');
        const answersList = document.getElementById('answers-list');

        let currentAnswers = [];

        // --- Utility Functions ---
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // --- Question Generation Functions ---
        const questionGenerators = {
            numberKnowledge: [
                () => {
                    const num = getRandomInt(10000, 99999);
                    const places = [1, 10, 100, 1000, 10000];
                    const placeIndex = getRandomInt(0, 4);
                    const placeValue = places[placeIndex];
                    const digit = Math.floor(num / placeValue) % 10;
                    const placeName = {1: 'ones', 10: 'tens', 100: 'hundreds', 1000: 'thousands', 10000: 'ten thousands'}[placeValue];
                    
                    return {
                        question: `In the number <strong>${num.toLocaleString()}</strong>, what is the value of the digit in the ${placeName} place?`,
                        answer: (digit * placeValue).toLocaleString()
                    };
                },
                () => {
                    const total = getRandomInt(20, 50) * 100;
                    const divisor = [10, 100][getRandomInt(0, 1)];
                    return {
                        question: `A factory produced ${total.toLocaleString()} toys. If they are packed in boxes of ${divisor}, how many boxes are needed?`,
                        answer: `${(total / divisor).toLocaleString()} boxes`
                    };
                },
                () => {
                    const denominator = [3, 4, 5, 8][getRandomInt(0, 3)];
                    const numerator = getRandomInt(1, denominator - 1);
                    const whole = denominator * getRandomInt(2, 10);
                    return {
                        question: `Calculate <strong><sup>${numerator}</sup>&frasl;<sub>${denominator}</sub></strong> of ${whole}.`,
                        answer: (whole / denominator) * numerator
                    };
                },
                () => {
                    const num = getRandomInt(100, 9999);
                    const place = [10, 100, 1000][getRandomInt(0,2)];
                    return {
                        question: `Round the number <strong>${num.toLocaleString()}</strong> to the nearest ${place}.`,
                        answer: Math.round(num / place) * place
                    };
                },
                 () => {
                    const startTemp = getRandomInt(-5, 5);
                    const change = getRandomInt(5, 15);
                    return {
                        question: `The temperature in the morning was ${startTemp}°C. By lunchtime, it had risen by ${change}°C. What was the new temperature?`,
                        answer: `${startTemp + change}°C`
                    };
                }
            ],
            algebra: [
                () => {
                    const start = getRandomInt(1, 10);
                    const step = getRandomInt(2, 9);
                    const sequence = [start, start + step, start + step * 2].join(', ');
                    const nextNum = start + step * 3;
                    return {
                        question: `Continue the number pattern: <strong>${sequence}, ...</strong> What is the next number?`,
                        answer: nextNum
                    };
                },
                () => {
                    const val = getRandomInt(2, 12);
                    const multiplier = getRandomInt(3, 9);
                    const result = val * multiplier;
                    return {
                        question: `Find the missing number: <strong>${multiplier} &times; ? = ${result}</strong>`,
                        answer: val
                    };
                },
                () => {
                    const a = getRandomInt(2, 9);
                    const b = getRandomInt(10, 25);
                    return {
                        question: `If <strong>7 + &#9633; = ${b}</strong>, what is the value of the square?`,
                        answer: `${b} - 7 = ${b - 7}`
                    };
                },
                () => {
                    const multiplier = getRandomInt(2, 5);
                    const adder = getRandomInt(1, 10);
                    const input = getRandomInt(3, 8);
                    const output = (input * multiplier) + adder;
                    return {
                        question: `An input/output machine follows the rule: <strong>input &times; ${multiplier} + ${adder}</strong>. If the input is ${input}, what is the output?`,
                        answer: output
                    };
                }
            ],
            statistics: [
                () => {
                    const total = [40, 50, 60, 80, 100][getRandomInt(0, 4)];
                    let count1, count2, count3;

                    // This loop ensures that all three categories represent a reasonable number of students.
                    do {
                        count1 = getRandomInt(Math.floor(total * 0.25), Math.floor(total * 0.45));
                        count2 = getRandomInt(Math.floor(total * 0.25), Math.floor(total * 0.45));
                        count3 = total - count1 - count2;
                    } while (count3 < Math.floor(total * 0.1));

                    const data = [
                        { label: 'Cats', count: count1, percent: (count1 / total) * 100, color: '#60a5fa' },
                        { label: 'Dogs', count: count2, percent: (count2 / total) * 100, color: '#4ade80' },
                        { label: 'Fish', count: count3, percent: (count3 / total) * 100, color: '#fb923c' }
                    ];
                    
                    const targetItem = data[getRandomInt(0, data.length - 1)]; // Select a random target
                    
                    const cx = 140; 
                    const cy = 60;
                    const r = 50;
                    let startAngle = -90; // Start at 12 o'clock

                    const paths = data.map(item => {
                        const angle = (item.percent / 100) * 360;
                        const endAngle = startAngle + angle;
                        
                        const x1 = cx + r * Math.cos(startAngle * Math.PI / 180);
                        const y1 = cy + r * Math.sin(startAngle * Math.PI / 180);
                        const x2 = cx + r * Math.cos(endAngle * Math.PI / 180);
                        const y2 = cy + r * Math.sin(endAngle * Math.PI / 180);
                        
                        const largeArcFlag = angle > 180 ? 1 : 0;

                        const d = `M ${cx},${cy} L ${x1},${y1} A ${r},${r} 0 ${largeArcFlag} 1 ${x2},${y2} Z`;
                        
                        startAngle = endAngle;
                        return `<path d="${d}" fill="${item.color}" stroke="white" stroke-width="1.5"></path>`;
                    }).join('');
                    
                    const legend = data.map((item, i) => 
                        `<rect x="10" y="${25 + i * 20}" width="10" height="10" fill="${item.color}"></rect>
                         <text x="25" y="${34 + i * 20}" font-size="11" fill="black">${item.label}: ${Math.round(item.percent)}%</text>`
                    ).join('');

                    const svg = `
                        <svg viewBox="0 0 200 120" class="mx-auto mt-4">
                            ${paths}
                            ${legend}
                        </svg>`;
                    
                    return {
                        question: `A survey of <strong>${total}</strong> students asked for their favourite pet. Based on the chart, how many students chose ${targetItem.label.toLowerCase()}?`,
                        svg: svg,
                        answer: targetItem.count
                    };
                },
                () => {
                    const outcomes = ['Red', 'Blue', 'Green', 'Yellow'];
                    const counts = [getRandomInt(1, 8), getRandomInt(1, 8), getRandomInt(1, 8), getRandomInt(1, 8)];
                    const total = counts.reduce((a, b) => a + b, 0);
                    const chosenColor = outcomes[getRandomInt(0, 1)];
                    const chosenCount = chosenColor === 'Red' ? counts[0] : counts[1];

                    return {
                        question: `A bag contains ${counts[0]} red, ${counts[1]} blue, ${counts[2]} green, and ${counts[3]} yellow marbles. What is the probability of picking a <strong>${chosenColor.toLowerCase()}</strong> marble?`,
                        answer: `${chosenCount}/${total}`
                    };
                },
                () => {
                    const data = [getRandomInt(5,15), getRandomInt(5,15), getRandomInt(5,15), getRandomInt(5,15), getRandomInt(5,15)];
                    const sum = data.reduce((a,b) => a + b, 0);
                    const mean = sum / data.length;
                    return {
                        question: `Find the mean (average) of the following numbers: <strong>${data.join(', ')}</strong>.`,
                        answer: mean
                    }
                },
                () => {
                    const data = [
                        { label: 'Soccer', count: getRandomInt(5, 20) },
                        { label: 'Rugby', count: getRandomInt(5, 20) },
                        { label: 'Tennis', count: getRandomInt(5, 20) },
                        { label: 'Cricket', count: getRandomInt(5, 20) },
                    ];
                    const maxCount = Math.max(...data.map(d => d.count));
                    const totalStudents = data.reduce((sum, d) => sum + d.count, 0);

                    const bars = data.map((item, i) => {
                        const barHeight = (item.count / maxCount) * 80; // Max bar height is 80
                        return `<g transform="translate(${20 + i * 45}, 0)">
                                    <rect y="${100 - barHeight}" width="30" height="${barHeight}" fill="#60a5fa"></rect>
                                    <text x="15" y="115" text-anchor="middle" font-size="10">${item.label}</text>
                                    <text x="15" y="${95 - barHeight}" text-anchor="middle" font-size="10" fill="black">${item.count}</text>
                                </g>`;
                    }).join('');
                    const svg = `<svg viewBox="0 0 200 120" class="mx-auto mt-4">${bars}</svg>`;
                    
                    return {
                        question: `The bar chart shows the favourite sports of a group of students. How many students were surveyed in total?`,
                        svg: svg,
                        answer: totalStudents
                    };
                }
            ],
            numberStrategies: [
                () => {
                    const price1 = (getRandomInt(15, 45) / 10).toFixed(2);
                    const price2 = (getRandomInt(15, 45) / 10).toFixed(2);
                    const totalCost = (parseFloat(price1) + parseFloat(price2)).toFixed(2);
                    const paid = [10, 20][getRandomInt(0,1)];
                    return {
                        question: `You buy an apple for <strong>$${price1}</strong> and a banana for <strong>$${price2}</strong>. How much change do you get from a $${paid} note?`,
                        answer: `$${(paid - totalCost).toFixed(2)}`
                    };
                },
                () => {
                    const num1 = getRandomInt(25, 99);
                    const num2 = getRandomInt(3, 9);
                    return {
                        question: `A library has ${num2} shelves. Each shelf can hold ${num1} books. What is the total number of books the library can hold?`,
                        answer: `${num1 * num2} books`
                    };
                },
                () => {
                    const price = [20, 40, 50, 80][getRandomInt(0,3)];
                    const percent = [10, 20, 25, 50][getRandomInt(0,3)];
                    const dollarOff = getRandomInt(Math.round(price * (percent/100)) - 5, Math.round(price * (percent/100)) + 5);
                    
                    const percentDiscount = price * (percent/100);
                    const betterDeal = percentDiscount > dollarOff ? `${percent}% off` : `$${dollarOff} off`;

                    return {
                        question: `An item costs <strong>$${price}</strong>. Which is the better deal: <strong>${percent}% off</strong> or <strong>$${dollarOff} off</strong>?`,
                        answer: `The ${betterDeal} is the better deal.`
                    }
                }
            ],
            geometryMeasurement: [
                () => {
                    const length = getRandomInt(5, 20);
                    const width = getRandomInt(3, 15);
                    const svg = `
                        <div class="w-full flex justify-center mt-4">
                            <svg viewBox="0 0 140 90" class="w-2/3 max-w-[150px]">
                                <rect x="20" y="20" width="100" height="50" stroke="black" fill="#e0f2fe" stroke-width="1"/>
                                <text x="70" y="15" font-size="10" text-anchor="middle">${length} cm</text>
                                <text x="10" y="45" font-size="10" text-anchor="middle" transform="rotate(-90, 10, 45)">${width} cm</text>
                            </svg>
                        </div>`;
                    return {
                        question: `What is the perimeter of the rectangle shown below?`,
                        svg: svg,
                        answer: `${2 * (length + width)} cm`
                    };
                },
                () => {
                    const length = getRandomInt(5, 12);
                    const width = getRandomInt(4, 9);
                     const svg = `
                        <div class="w-full flex justify-center mt-4">
                            <svg viewBox="0 0 140 90" class="w-2/3 max-w-[150px]">
                                <rect x="20" y="20" width="100" height="50" stroke="black" fill="#fef08a" stroke-width="1"/>
                                <text x="70" y="45" font-size="10" text-anchor="middle">Area = ?</text>
                                <text x="70" y="15" font-size="10" text-anchor="middle">${length} m</text>
                                <text x="10" y="45" font-size="10" text-anchor="middle" transform="rotate(-90, 10, 45)">${width} m</text>
                            </svg>
                        </div>`;
                    return {
                        question: `A rectangular garden is ${length}m long and ${width}m wide. What is its area?`,
                        svg: svg,
                        answer: `${length * width} m²`
                    };
                },
                () => {
                    const startHour = getRandomInt(8, 10);
                    const startMin = getRandomInt(0, 59);
                    const durationHours = getRandomInt(1, 3);
                    const durationMins = getRandomInt(5, 55);
                    
                    let endMin = startMin + durationMins;
                    let endHour = startHour + durationHours;
                    if(endMin >= 60){
                        endMin -= 60;
                        endHour += 1;
                    }

                    const formatTime = (h, m) => `${h % 12 === 0 ? 12 : h % 12}:${m.toString().padStart(2, '0')} ${h < 12 ? 'AM' : 'PM'}`;

                    return {
                        question: `A movie starts at <strong>${formatTime(startHour, startMin)}</strong> and runs for ${durationHours} hour${durationHours > 1 ? 's' : ''} and ${durationMins} minutes. What time does it finish?`,
                        answer: formatTime(endHour, endMin)
                    }
                },
                () => {
                    const angleType = ['Acute', 'Obtuse', 'Right'][getRandomInt(0, 2)];
                    let angle, pathD;

                    switch (angleType) {
                        case 'Acute':
                            angle = getRandomInt(20, 70);
                            pathD = `M 50 100 L 150 100 L ${50 + 80 * Math.cos(angle * Math.PI/180)} ${100 - 80 * Math.sin(angle * Math.PI/180)} Z`;
                            break;
                        case 'Obtuse':
                            angle = getRandomInt(100, 160);
                             pathD = `M 50 100 L 150 100 L ${50 + 80 * Math.cos(angle * Math.PI/180)} ${100 - 80 * Math.sin(angle * Math.PI/180)} Z`;
                            break;
                        case 'Right':
                            angle = 90;
                            pathD = `M 50 100 L 150 100 L 50 20 Z`;
                            break;
                    }
                     const svg = `<svg viewBox="0 0 200 120" class="mx-auto mt-4"><path d="${pathD}" stroke="black" stroke-width="2" fill="#e0f2fe"/></svg>`;

                    return {
                        question: `What type of angle is shown below? (Acute, Obtuse, or Right)`,
                        svg: svg,
                        answer: angleType
                    };
                }
            ]
        };

        // --- Main App Logic ---
        function generateQuestions() {
            // Clear previous questions and answers
            questionsGrid.innerHTML = '';
            answersList.innerHTML = '';
            answersContainer.classList.add('hidden');
            answersBtn.textContent = 'Show Answers';
            currentAnswers = [];
            
            // Get one question from each category
            let questions = [];
            for (const category in questionGenerators) {
                const categoryGenerators = questionGenerators[category];
                const generator = categoryGenerators[getRandomInt(0, categoryGenerators.length - 1)];
                questions.push(generator());
            }

            // Shuffle the order of questions
            questions = shuffleArray(questions);
            
            // Display questions and store answers
            questions.forEach((q, index) => {
                const questionBox = document.createElement('div');
                questionBox.className = 'question-box bg-white p-5 rounded-xl shadow-sm border border-gray-200 flex flex-col justify-between';
                
                const questionText = `<p class="text-lg leading-relaxed"><strong class="mr-2">${index + 1}.</strong>${q.question}</p>`;
                const svgContent = q.svg ? q.svg : '';

                questionBox.innerHTML = `
                    <div>
                        ${questionText}
                        ${svgContent}
                    </div>
                `;
                questionsGrid.appendChild(questionBox);
                currentAnswers.push(q.answer);
            });
        }

        function toggleAnswers() {
            const isHidden = answersContainer.classList.toggle('hidden');
            if (isHidden) {
                answersBtn.textContent = 'Show Answers';
            } else {
                answersBtn.textContent = 'Hide Answers';
                answersList.innerHTML = ''; // Clear old answers
                currentAnswers.forEach(answer => {
                    const li = document.createElement('li');
                    li.innerHTML = answer;
                    answersList.appendChild(li);
                });
            }
        }

        // --- Event Listeners ---
        generateBtn.addEventListener('click', generateQuestions);
        answersBtn.addEventListener('click', toggleAnswers);

        // --- Initial Load ---
        document.addEventListener('DOMContentLoaded', generateQuestions);

    </script>

</body>
</html>









