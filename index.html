<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Five</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F9F9F7;
        }
        /* Custom style to ensure SVGs scale correctly within their containers */
        .question-box svg {
            width: 100%;
            height: auto;
            max-height: 200px; /* Prevents SVGs from becoming too large */
        }
    </style>
</head>
<body class="antialiased text-gray-800">

    <div id="app-container" class="min-h-screen flex flex-col items-center justify-center p-4 sm:p-6 lg:p-8">
        
        <!-- Main content area -->
        <main id="main-content" class="w-full max-w-7xl mx-auto">
            <header class="text-center mb-6">
                <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 tracking-tight">Daily Five</h1>
                <p class="mt-2 text-base text-gray-600">A new set of daily math questions.</p>
            </header>

            <!-- Questions Grid -->
            <div id="questions-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 sm:gap-6">
                <!-- Question boxes will be inserted here by JavaScript -->
            </div>
            
            <!-- Action Buttons -->
            <div class="mt-8 flex flex-col sm:flex-row items-center justify-center gap-4">
                <button id="generate-btn" class="w-full sm:w-auto bg-blue-600 text-white font-semibold py-3 px-8 rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-transform transform hover:scale-105">
                    Generate New Set
                </button>
                <button id="answers-btn" class="w-full sm:w-auto bg-gray-200 text-gray-800 font-semibold py-3 px-8 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition-transform transform hover:scale-105">
                    Show Answers
                </button>
            </div>

            <!-- Answers Section (Initially Hidden) -->
            <div id="answers-container" class="hidden mt-8 max-w-3xl mx-auto bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-center mb-4">Answers</h2>
                <ol id="answers-list" class="list-decimal list-inside space-y-2 text-lg">
                    <!-- Answers will be inserted here -->
                </ol>
            </div>

        </main>
    </div>

    <script>
        // --- DOM Elements ---
        const questionsGrid = document.getElementById('questions-grid');
        const generateBtn = document.getElementById('generate-btn');
        const answersBtn = document.getElementById('answers-btn');
        const answersContainer = document.getElementById('answers-container');
        const answersList = document.getElementById('answers-list');

        let currentAnswers = [];

        // --- Utility Functions ---
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // --- Question Generation Functions ---
        const questionGenerators = {
            numberKnowledge: [
                () => {
                    const num = getRandomInt(10000, 99999);
                    const places = [1, 10, 100, 1000, 10000];
                    const placeIndex = getRandomInt(0, 4);
                    const placeValue = places[placeIndex];
                    const digit = Math.floor(num / placeValue) % 10;
                    const placeName = {1: 'ones', 10: 'tens', 100: 'hundreds', 1000: 'thousands', 10000: 'ten thousands'}[placeValue];
                    
                    return {
                        question: `In the number <strong>${num.toLocaleString()}</strong>, what is the value of the digit in the ${placeName} place?`,
                        answer: (digit * placeValue).toLocaleString()
                    };
                },
                () => {
                    const total = getRandomInt(20, 50) * 100;
                    const divisor = [10, 100][getRandomInt(0, 1)];
                    return {
                        question: `A factory produced ${total.toLocaleString()} toys. If they are packed in boxes of ${divisor}, how many boxes are needed?`,
                        answer: `${(total / divisor).toLocaleString()} boxes`
                    };
                },
                () => {
                    const denominator = [3, 4, 5, 8][getRandomInt(0, 3)];
                    const numerator = getRandomInt(1, denominator - 1);
                    const whole = denominator * getRandomInt(2, 10);
                    return {
                        question: `Calculate <strong><sup>${numerator}</sup>&frasl;<sub>${denominator}</sub></strong> of ${whole}.`,
                        answer: (whole / denominator) * numerator
                    };
                },
                () => {
                    const num = getRandomInt(100, 9999);
                    const place = [10, 100, 1000][getRandomInt(0,2)];
                    return {
                        question: `Round the number <strong>${num.toLocaleString()}</strong> to the nearest ${place}.`,
                        answer: Math.round(num / place) * place
                    };
                },
                 () => {
                    const startTemp = getRandomInt(-5, 5);
                    const change = getRandomInt(5, 15);
                    return {
                        question: `The temperature in the morning was ${startTemp}°C. By lunchtime, it had risen by ${change}°C. What was the new temperature?`,
                        answer: `${startTemp + change}°C`
                    };
                },
                () => {
                    const num = getRandomInt(2000, 5000);
                    return {
                        question: `What number is 100 more than <strong>${num.toLocaleString()}</strong>?`,
                        answer: (num + 100).toLocaleString()
                    }
                },
                () => {
                    const tens = getRandomInt(15, 45);
                    return {
                        question: `How many $10 notes are in <strong>$${tens * 10}</strong>?`,
                        answer: `${tens}`
                    }
                },
                () => {
                    const timesTable = getRandomInt(3, 8);
                    const multiples = [timesTable * 2, timesTable * 3, timesTable * 4, timesTable * 5];
                    const nonMultiple = multiples[2] + getRandomInt(1, 3);
                    const options = shuffleArray([...multiples.slice(0,3), nonMultiple]);
                    return {
                        question: `Which number is NOT in the <strong>${timesTable}-times table</strong>? <br>(${options.join(', ')})`,
                        answer: nonMultiple
                    }
                }
            ],
            algebra: [
                () => {
                    const start = getRandomInt(1, 10);
                    const step = getRandomInt(2, 9);
                    const sequence = [start, start + step, start + step * 2].join(', ');
                    const nextNum = start + step * 3;
                    return {
                        question: `Continue the number pattern: <strong>${sequence}, ...</strong> What is the next number?`,
                        answer: nextNum
                    };
                },
                () => {
                    const val = getRandomInt(2, 12);
                    const multiplier = getRandomInt(3, 9);
                    const result = val * multiplier;
                    return {
                        question: `Find the missing number: <strong>${multiplier} &times; ? = ${result}</strong>`,
                        answer: val
                    };
                },
                () => {
                    const a = getRandomInt(2, 9);
                    const b = getRandomInt(10, 25);
                    return {
                        question: `If <strong>7 + &#9633; = ${b}</strong>, what is the value of the square?`,
                        answer: `${b} - 7 = ${b - 7}`
                    };
                },
                () => {
                    const multiplier = getRandomInt(2, 5);
                    const adder = getRandomInt(1, 10);
                    const input = getRandomInt(3, 8);
                    const output = (input * multiplier) + adder;
                    return {
                        question: `An input/output machine follows the rule: <strong>input &times; ${multiplier} + ${adder}</strong>. If the input is ${input}, what is the output?`,
                        answer: output
                    };
                },
                () => {
                    const addend1 = getRandomInt(20, 50);
                    const sum = getRandomInt(addend1 + 10, 99);
                    return {
                        question: `Find the missing number: <strong>${addend1} + &#9633; = ${sum}</strong>`,
                        answer: sum - addend1
                    }
                },
                () => {
                    const num1 = getRandomInt(2, 8);
                    const num2 = getRandomInt(2, 8);
                    const num3 = getRandomInt(1, num1 + num2 - 1);
                    return {
                        question: `Balance the equation: <strong>${num1} + ${num2} = &#9633; + ${num3}</strong>`,
                        answer: (num1 + num2) - num3
                    }
                },
                () => {
                    const start = getRandomInt(1, 3);
                    const multiplier = getRandomInt(2, 4);
                    const sequence = [start, start * multiplier, start * multiplier * multiplier];
                    const outlier = sequence[2] + getRandomInt(1,5);
                    const options = shuffleArray([sequence[0], sequence[1], sequence[2], outlier]);
                    return {
                        question: `Which number does not fit the pattern? <strong>${options.join(', ')}</strong>`,
                        answer: outlier
                    }
                }
            ],
            statistics: [
                () => {
                    const total = [40, 50, 60, 80, 100][getRandomInt(0, 4)];
                    const percentCombinations = [
                        [10, 20, 70], [10, 30, 60], [10, 40, 50],
                        [20, 20, 60], [20, 30, 50], [20, 40, 40],
                        [30, 30, 40]
                    ];

                    const chosenPercents = shuffleArray(percentCombinations[getRandomInt(0, percentCombinations.length - 1)]);

                    const data = [
                        { label: 'Cats', percent: chosenPercents[0], color: '#60a5fa' },
                        { label: 'Dogs', percent: chosenPercents[1], color: '#4ade80' },
                        { label: 'Fish', percent: chosenPercents[2], color: '#fb923c' }
                    ];

                    // Calculate the count for each category based on the total
                    data.forEach(item => {
                        item.count = (item.percent / 100) * total;
                    });
                    
                    const targetItem = data[getRandomInt(0, data.length - 1)]; // Select a random target
                    
                    const cx = 140; 
                    const cy = 60;
                    const r = 50;
                    let startAngle = -90; // Start at 12 o'clock

                    const paths = data.map(item => {
                        const angle = (item.percent / 100) * 360;
                        const endAngle = startAngle + angle;
                        
                        const x1 = cx + r * Math.cos(startAngle * Math.PI / 180);
                        const y1 = cy + r * Math.sin(startAngle * Math.PI / 180);
                        const x2 = cx + r * Math.cos(endAngle * Math.PI / 180);
                        const y2 = cy + r * Math.sin(endAngle * Math.PI / 180);
                        
                        const largeArcFlag = angle > 180 ? 1 : 0;

                        const d = `M ${cx},${cy} L ${x1},${y1} A ${r},${r} 0 ${largeArcFlag} 1 ${x2},${y2} Z`;
                        
                        startAngle = endAngle;
                        return `<path d="${d}" fill="${item.color}" stroke="white" stroke-width="1.5"></path>`;
                    }).join('');
                    
                    const legend = data.map((item, i) => 
                        `<rect x="10" y="${25 + i * 20}" width="10" height="10" fill="${item.color}"></rect>
                         <text x="25" y="${34 + i * 20}" font-size="11" fill="black">${item.label}: ${item.percent}%</text>`
                    ).join('');

                    const svg = `
                        <svg viewBox="0 0 200 120" class="mx-auto mt-4">
                            ${paths}
                            ${legend}
                        </svg>`;
                    
                    return {
                        question: `A survey of <strong>${total}</strong> students asked for their favourite pet. Based on the chart, how many students chose ${targetItem.label.toLowerCase()}?`,
                        svg: svg,
                        answer: targetItem.count
                    };
                },
                () => {
                    const outcomes = ['Red', 'Blue', 'Green', 'Yellow'];
                    const counts = [getRandomInt(1, 8), getRandomInt(1, 8), getRandomInt(1, 8), getRandomInt(1, 8)];
                    const total = counts.reduce((a, b) => a + b, 0);
                    const chosenColor = outcomes[getRandomInt(0, 1)];
                    const chosenCount = chosenColor === 'Red' ? counts[0] : counts[1];

                    return {
                        question: `A bag contains ${counts[0]} red, ${counts[1]} blue, ${counts[2]} green, and ${counts[3]} yellow marbles. What is the probability of picking a <strong>${chosenColor.toLowerCase()}</strong> marble?`,
                        answer: `${chosenCount}/${total}`
                    };
                },
                () => {
                    const data = [getRandomInt(5,15), getRandomInt(5,15), getRandomInt(5,15), getRandomInt(5,15), getRandomInt(5,15)];
                    const sum = data.reduce((a,b) => a + b, 0);
                    const mean = sum / data.length;
                    return {
                        question: `Find the mean (average) of the following numbers: <strong>${data.join(', ')}</strong>.`,
                        answer: mean
                    }
                },
                () => {
                    const data = [
                        { label: 'Soccer', count: getRandomInt(5, 20) },
                        { label: 'Rugby', count: getRandomInt(5, 20) },
                        { label: 'Tennis', count: getRandomInt(5, 20) },
                        { label: 'Cricket', count: getRandomInt(5, 20) },
                    ];
                    const maxCount = Math.max(...data.map(d => d.count));
                    const totalStudents = data.reduce((sum, d) => sum + d.count, 0);

                    const bars = data.map((item, i) => {
                        const barHeight = (item.count / maxCount) * 80; // Max bar height is 80
                        return `<g transform="translate(${20 + i * 45}, 0)">
                                    <rect y="${100 - barHeight}" width="30" height="${barHeight}" fill="#60a5fa"></rect>
                                    <text x="15" y="115" text-anchor="middle" font-size="10">${item.label}</text>
                                    <text x="15" y="${95 - barHeight}" text-anchor="middle" font-size="10" fill="black">${item.count}</text>
                                </g>`;
                    }).join('');
                    const svg = `<svg viewBox="0 0 200 120" class="mx-auto mt-4">${bars}</svg>`;
                    
                    return {
                        question: `The bar chart shows the favourite sports of a group of students. How many students were surveyed in total?`,
                        svg: svg,
                        answer: totalStudents
                    };
                },
                () => {
                    const green = getRandomInt(3, 8);
                    const blue = getRandomInt(2, green-1);
                    const moreLikely = green > blue ? 'green' : 'blue';
                    return {
                        question: `A cup contains <strong>${green} green</strong> marbles and <strong>${blue} blue</strong> marbles. Is it more likely, less likely, or equally likely that you will pick a green marble?`,
                        answer: 'More likely'
                    }
                },
                () => {
                    const data = [
                        {day: 'Mon', books: getRandomInt(2,5)},
                        {day: 'Tue', books: getRandomInt(2,5)},
                        {day: 'Wed', books: getRandomInt(2,5)},
                        {day: 'Thu', books: getRandomInt(2,5)},
                    ];
                    const scale = 2;
                    const targetDay = data[getRandomInt(0, data.length-1)];

                    const pictos = data.map((d, i) => {
                         let row = `<text x="5" y="${25 + i * 25}" font-size="12">${d.day}</text>`;
                         for(let j=0; j<d.books; j++) {
                             row += `<text x="${40 + j * 20}" y="${27 + i * 25}" font-size="15">&#128214;</text>`; // Book emoji
                         }
                         return row;
                    }).join('');

                    const svg = `<svg viewBox="0 0 200 130" class="mx-auto mt-4">
                                    ${pictos}
                                    <text x="5" y="125" font-size="12">Key: &#128214; = ${scale} books read</text>
                                </svg>`;

                    return {
                        question: `The pictograph shows books read by a student. How many books were read on <strong>${targetDay.day}</strong>?`,
                        svg: svg,
                        answer: targetDay.books * scale
                    }
                },
                 () => {
                    const players = [
                        {name: 'Sam', goals: getRandomInt(3, 8)},
                        {name: 'Jen', goals: getRandomInt(3, 8)},
                        {name: 'Mo', goals: getRandomInt(3, 8)},
                        {name: 'Li', goals: getRandomInt(3, 8)},
                    ].sort((a,b) => a.goals - b.goals);

                    const threshold = players[getRandomInt(1,2)].goals;
                    const playersBelow = players.filter(p => p.goals < threshold).length;
                    
                    let table = `<table class="w-full text-center mt-4 border-collapse">
                                    <thead><tr><th class="border p-2">Player</th><th class="border p-2">Goals</th></tr></thead>
                                    <tbody>`;
                    players.forEach(p => {
                        table += `<tr><td class="border p-2">${p.name}</td><td class="border p-2">${p.goals}</td></tr>`;
                    });
                    table += `</tbody></table>`;
                    
                    return {
                        question: `Using the frequency table, how many players scored fewer than <strong>${threshold} goals</strong>? ${table}`,
                        answer: playersBelow
                    };
                }
            ],
            numberStrategies: [
                () => {
                    const price1 = (getRandomInt(15, 45) / 10).toFixed(2);
                    const price2 = (getRandomInt(15, 45) / 10).toFixed(2);
                    const totalCost = (parseFloat(price1) + parseFloat(price2)).toFixed(2);
                    const paid = [10, 20][getRandomInt(0,1)];
                    return {
                        question: `You buy an apple for <strong>$${price1}</strong> and a banana for <strong>$${price2}</strong>. How much change do you get from a $${paid} note?`,
                        answer: `$${(paid - totalCost).toFixed(2)}`
                    };
                },
                () => {
                    const num1 = getRandomInt(25, 99);
                    const num2 = getRandomInt(3, 9);
                    return {
                        question: `A library has ${num2} shelves. Each shelf can hold ${num1} books. What is the total number of books the library can hold?`,
                        answer: `${num1 * num2} books`
                    };
                },
                () => {
                    const price = [20, 40, 50, 80][getRandomInt(0,3)];
                    const percent = [10, 20, 25, 50][getRandomInt(0,3)];
                    const dollarOff = getRandomInt(Math.round(price * (percent/100)) - 5, Math.round(price * (percent/100)) + 5);
                    
                    const percentDiscount = price * (percent/100);
                    const betterDeal = percentDiscount > dollarOff ? `${percent}% off` : `$${dollarOff} off`;

                    return {
                        question: `An item costs <strong>$${price}</strong>. Which is the better deal: <strong>${percent}% off</strong> or <strong>$${dollarOff} off</strong>?`,
                        answer: `The ${betterDeal} is the better deal.`
                    }
                },
                () => {
                    const totalCost = getRandomInt(210, 290); // in cents
                    const change = 300 - totalCost;
                    const coins = {50: 0, 20: 0, 10: 0};
                    let remaining = change;
                    if (remaining >= 50) { coins[50] = 1; remaining -= 50; }
                    coins[20] = Math.floor(remaining/20); remaining %= 20;
                    coins[10] = Math.round(remaining/10);
                    let answerString = Object.entries(coins).filter(([_,v]) => v > 0).map(([k,v]) => `${v} x ${k}c`).join(', ');

                    return {
                        question: `An item costs <strong>$${(totalCost/100).toFixed(2)}</strong>. If you pay with a <strong>$2</strong> and a <strong>$1</strong> coin, what change will you get?`,
                        answer: answerString || 'No change'
                    }
                },
                () => {
                    const num1 = getRandomInt(25, 49);
                    const num2 = getRandomInt(25, 49);
                    const num3 = getRandomInt(25, 49);
                    return {
                        question: `A farmer collected ${num1} eggs on Monday, ${num2} on Tuesday, and ${num3} on Wednesday. How many eggs were collected in total?`,
                        answer: num1 + num2 + num3
                    }
                },
                () => {
                    const num1 = getRandomInt(50, 99);
                    const num2 = getRandomInt(20, num1-10);
                    return {
                        question: `There are ${num1} students in the hall. If ${num2} students leave, how many are left?`,
                        answer: num1 - num2
                    }
                },
                () => {
                    const num1 = getRandomInt(10, 20);
                    const num2 = getRandomInt(10, 20);
                    const num3 = [3, 4, 5][getRandomInt(0,2)];
                    return {
                        question: `Sarah has ${num1} stickers, and Tom has ${num2}. They share them equally among ${num3} friends. How many stickers does each friend get?`,
                        answer: Math.floor((num1 + num2) / num3)
                    }
                }
            ],
            geometryMeasurement: [
                () => {
                    const length = getRandomInt(5, 20);
                    const width = getRandomInt(3, 15);
                    const svg = `
                        <div class="w-full flex justify-center mt-4">
                            <svg viewBox="0 0 140 90" class="w-2/3 max-w-[150px]">
                                <rect x="20" y="20" width="100" height="50" stroke="black" fill="#e0f2fe" stroke-width="1"/>
                                <text x="70" y="15" font-size="10" text-anchor="middle">${length} cm</text>
                                <text x="10" y="45" font-size="10" text-anchor="middle" transform="rotate(-90, 10, 45)">${width} cm</text>
                            </svg>
                        </div>`;
                    return {
                        question: `What is the perimeter of the rectangle shown below?`,
                        svg: svg,
                        answer: `${2 * (length + width)} cm`
                    };
                },
                () => {
                    const length = getRandomInt(5, 12);
                    const width = getRandomInt(4, 9);
                     const svg = `
                        <div class="w-full flex justify-center mt-4">
                            <svg viewBox="0 0 140 90" class="w-2/3 max-w-[150px]">
                                <rect x="20" y="20" width="100" height="50" stroke="black" fill="#fef08a" stroke-width="1"/>
                                <text x="70" y="45" font-size="10" text-anchor="middle">Area = ?</text>
                                <text x="70" y="15" font-size="10" text-anchor="middle">${length} m</text>
                                <text x="10" y="45" font-size="10" text-anchor="middle" transform="rotate(-90, 10, 45)">${width} m</text>
                            </svg>
                        </div>`;
                    return {
                        question: `A rectangular garden is ${length}m long and ${width}m wide. What is its area?`,
                        svg: svg,
                        answer: `${length * width} m²`
                    };
                },
                () => {
                    const startHour = getRandomInt(8, 10);
                    const startMin = getRandomInt(0, 59);
                    const durationHours = getRandomInt(1, 3);
                    const durationMins = getRandomInt(5, 55);
                    
                    let endMin = startMin + durationMins;
                    let endHour = startHour + durationHours;
                    if(endMin >= 60){
                        endMin -= 60;
                        endHour += 1;
                    }

                    const formatTime = (h, m) => `${h % 12 === 0 ? 12 : h % 12}:${m.toString().padStart(2, '0')} ${h < 12 ? 'AM' : 'PM'}`;

                    return {
                        question: `A movie starts at <strong>${formatTime(startHour, startMin)}</strong> and runs for ${durationHours} hour${durationHours > 1 ? 's' : ''} and ${durationMins} minutes. What time does it finish?`,
                        answer: formatTime(endHour, endMin)
                    }
                },
                () => {
                    const angleType = ['Acute', 'Obtuse', 'Right'][getRandomInt(0, 2)];
                    let angle, pathD;

                    switch (angleType) {
                        case 'Acute':
                            angle = getRandomInt(20, 70);
                            pathD = `M 50 100 L 150 100 L ${50 + 80 * Math.cos(angle * Math.PI/180)} ${100 - 80 * Math.sin(angle * Math.PI/180)} Z`;
                            break;
                        case 'Obtuse':
                            angle = getRandomInt(100, 160);
                             pathD = `M 50 100 L 150 100 L ${50 + 80 * Math.cos(angle * Math.PI/180)} ${100 - 80 * Math.sin(angle * Math.PI/180)} Z`;
                            break;
                        case 'Right':
                            angle = 90;
                            pathD = `M 50 100 L 150 100 L 50 20 Z`;
                            break;
                    }
                     const svg = `<svg viewBox="0 0 200 120" class="mx-auto mt-4"><path d="${pathD}" stroke="black" stroke-width="2" fill="#e0f2fe"/></svg>`;

                    return {
                        question: `What type of angle is shown below? (Acute, Obtuse, or Right)`,
                        svg: svg,
                        answer: angleType
                    };
                },
                () => {
                    const width = getRandomInt(5, 8);
                    const height = getRandomInt(3, 5);
                    let grid = '';
                    for (let i = 0; i < height; i++) {
                        for (let j = 0; j < width; j++) {
                            grid += `<rect x="${j * 20}" y="${i * 20}" width="20" height="20" stroke="gray" fill="#a7f3d0"/>`;
                        }
                    }
                    const svg = `<svg viewBox="-1 -1 162 102" class="mx-auto mt-4">${grid}</svg>`;
                    return {
                        question: `What is the area of the shape below, in unit squares?`,
                        svg: svg,
                        answer: `${width * height} unit squares`
                    };
                },
                () => {
                    const shape = 'M 20 20 L 60 20 L 60 40 L 40 40 L 40 60 L 20 60 Z';
                    const svg = `<svg viewBox="0 0 150 100" class="mx-auto mt-4">
                                    <path d="${shape}" fill="#facc15"/>
                                    <path d="${shape}" transform="rotate(-90 75 50)" fill="#fb923c" opacity="0.7"/>
                                    <circle cx="75" cy="50" r="3" fill="black" />
                                    <line x1="75" y1="50" x2="110" y2="50" stroke="black" stroke-dasharray="2,2"/>
                                    <text x="115" y="54" font-size="10">Start</text>
                                    <path d="M 75 15 A 35 35 0 0 0 40 50" fill="none" stroke="black"/>
                                    <polygon points="40,45 35,50 40,55" fill="black"/>
                                </svg>`;
                    return {
                        question: 'What does the yellow shape look like after a quarter turn (90°) anti-clockwise around the black dot?',
                        svg: svg,
                        answer: 'The orange shape'
                    }
                },
                () => {
                    const shape = 'M 20 20 L 50 20 L 50 60 L 20 60 Z';
                    const svg = `<svg viewBox="0 0 150 100" class="mx-auto mt-4">
                                    <path d="${shape}" fill="#a5b4fc"/>
                                    <line x1="75" y1="10" x2="75" y2="90" stroke="black" stroke-dasharray="3,3"/>
                                    <path d="M 130 20 L 100 20 L 100 60 L 130 60 Z" fill="#67e8f9" opacity="0.8"/>
                                </svg>`;
                    return {
                        question: 'If the purple shape is reflected in the mirror line, what will it look like?',
                        svg: svg,
                        answer: 'The blue shape'
                    }
                },
                () => {
                    const ml = getRandomInt(1,4) * 5 + 50;
                    let markings = '';
                    for(let i=0; i <= 100; i+=10) {
                        markings += `<line x1="45" y1="${120-i}" x2="55" y2="${120-i}" stroke="black" />`;
                        markings += `<text x="38" y="${124-i}" font-size="8" text-anchor="end">${i}</text>`;
                    }
                     for(let i=5; i <= 95; i+=10) {
                        markings += `<line x1="48" y1="${120-i}" x2="52" y2="${120-i}" stroke="black" />`;
                    }
                    const svg = `<svg viewBox="0 0 100 140" class="mx-auto mt-4">
                                    <rect x="55" y="${120-ml}" width="20" height="${ml}" fill="#67e8f9"/>
                                    <path d="M 50 120 L 50 10 L 80 10 L 80 120" stroke="black" fill="none"/>
                                    ${markings}
                                    <text x="75" y="130" font-size="10">ml</text>
                                </svg>`;
                    return {
                        question: 'How much liquid is in the measuring cup?',
                        svg: svg,
                        answer: `${ml} ml`
                    }
                }
            ]
        };

        // --- Main App Logic ---
        function generateQuestions() {
            // Clear previous questions and answers
            questionsGrid.innerHTML = '';
            answersList.innerHTML = '';
            answersContainer.classList.add('hidden');
            answersBtn.textContent = 'Show Answers';
            currentAnswers = [];
            
            // Get one question from each category
            let questions = [];
            for (const category in questionGenerators) {
                const categoryGenerators = questionGenerators[category];
                const generator = categoryGenerators[getRandomInt(0, categoryGenerators.length - 1)];
                questions.push(generator());
            }

            // Shuffle the order of questions
            questions = shuffleArray(questions);
            
            // Display questions and store answers
            questions.forEach((q, index) => {
                const questionBox = document.createElement('div');
                questionBox.className = 'question-box bg-white p-5 rounded-xl shadow-sm border border-gray-200 flex flex-col justify-between';
                
                const questionText = `<p class="text-lg leading-relaxed"><strong class="mr-2">${index + 1}.</strong>${q.question}</p>`;
                const svgContent = q.svg ? q.svg : '';

                questionBox.innerHTML = `
                    <div>
                        ${questionText}
                        ${svgContent}
                    </div>
                `;
                questionsGrid.appendChild(questionBox);
                currentAnswers.push(q.answer);
            });
        }

        function toggleAnswers() {
            const isHidden = answersContainer.classList.toggle('hidden');
            if (isHidden) {
                answersBtn.textContent = 'Show Answers';
            } else {
                answersBtn.textContent = 'Hide Answers';
                answersList.innerHTML = ''; // Clear old answers
                currentAnswers.forEach(answer => {
                    const li = document.createElement('li');
                    li.innerHTML = answer;
                    answersList.appendChild(li);
                });
            }
        }

        // --- Event Listeners ---
        generateBtn.addEventListener('click', generateQuestions);
        answersBtn.addEventListener('click', toggleAnswers);

        // --- Initial Load ---
        document.addEventListener('DOMContentLoaded', generateQuestions);

    </script>

</body>
</html>











